
- 20210517

blocks - /user/product/taxes/reward/coupon/share/page/media/order/payment/notify/statistics/extension/setting(location/currency/transport/)

> user
> user_group
> user_balance <?balance_type:gif, aim_id:123, discount:1234, expire_at:timestamp>
> user_wishlist

> source_group <?id/g_tag/g_cont({})/created_at/updated_at>

> product
> product_content
> product_extra <?id/product_id/sku,img,title,option,option_value,regular_price,sale_price,status,stock,describe/>
> product_related
> product_category
> product_tag ?
> product_attribute ?
> product_attribute_group ?
> product_option
> product_option_group
> review
> taxes (全局配置-具体商品配置)

> reward (bind user_group ?)
	- coupon (启用-按照顺序计算)
	- points ?
	- gif ? (need bind product)

> share
> share to your friends, you will get a coupon

> sign in & lottery

> page (informations article)

> media (images/video)

> order
> order_status
> order_payment_stauts
> order_transport_status
> order mark

> order_products
> order_products_transport_status

> payment

> extra_cost (bind user_group / user_zone ?)
	- taxes
	- transport (exclude_zone 某种物流方式除去某些位置)

> notify <?notify_type:email, content:email_model_2, when:order_processing, times:1>
	- notify node ? - when
	- email_model
	- send_email
	- log_email

> statistics

> extension

> admin
> admin_group

> setting
	- location (销售目的地-根据 IP 确定 、语言选项、时区)
	- currency (小数位 *分两位存储)
	- email

> i18n

# pages
#前台
/home index theme?
/user register login social_login logout index order wishilist returns cart rewards addressbook forgeotten-password *用户主页看下淘宝等的登录主页
/隐私政策等页面
/cart mini-cart full-cart
/products index categroy theme?
/extension/payment ?

# 重复订单的问题 (非成功状态)
订单的属性：谁在什么时候购买了什么商品，使用了什么支付方式，使用什么物流运往什么地方，是否使用优惠券，当前什么状态
[检查] 主属性：who \ products \ address > hash > (time) > status
[更新] 可更新属性：time \ payment \ transport \ reward(coupon) \ status

时间应该控制在一定范围内，比如 1 天之内的就检查重复订单，之外就重新生成订单
将主属性 who \ products \ address 计算 hash 存储，新订单生成请求时 检查 hash，(time) 以及对应的数据行状态
